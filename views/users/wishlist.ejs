<%- include("../../views/partials/user/header") %>
    <title>Wishlist</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/style/user/orders.css">
    <style>
      /* Enhanced Wishlist CSS */
   
body {
  background-color: #f8f9fa;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #333;
}

/* Sidebar Wrapper */
 /* Desktop Styles */
.ultra-sidebar-container {
    width: 18vw;
    min-width: 250px;
    background-color: #f8f9fa;
    border-right: 2px solid #e0e0e0;
    padding: 20px;
    margin-left: 3vh;
    min-height: 100vh;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.ultra-sidebar-header h2 {
    font-size: 22px;
    margin-bottom: 20px;
    color: #333;
    display: flex;
    align-items: center;
    gap: 10px;
}

.ultra-sidebar-menu a {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 15px;
    margin-bottom: 10px;
    color: #555;
    text-decoration: none;
    background-color: #fff;
    border-radius: 6px;
    transition: all 0.3s ease;
    font-size: 16px;
}

.ultra-sidebar-menu a:hover,
.ultra-sidebar-menu a.ultra-active {
    background-color: #007bff;
    color: #fff;
}

.ultra-sidebar-menu a i {
    font-size: 18px;
}

.ultra-sidebar-menu .ultra-logout-btn {
    color: #dc3545;
}

.ultra-sidebar-menu .ultra-logout-btn:hover {
    background-color: #dc3545;
    color: white;
}

/* Tablet Screens */
@media (max-width: 991px) {
    .ultra-sidebar-container {
        width: 100%;
        min-width: 100%;
        border-right: none;
        border-bottom: 1px solid #ddd;
        padding: 15px;
        display: flex;
        flex-direction: row;
        overflow-x: auto;
        white-space: nowrap;
        gap: 10px;
    }

    .ultra-sidebar-header {
        display: none;
    }

    .ultra-sidebar-menu {
        display: flex;
        flex-direction: row;
        gap: 10px;
        width: 100%;
    }

    .ultra-sidebar-menu a {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-size: 13px;
        padding: 8px;
        min-width: 80px;
        border-radius: 10px;
    }

    .ultra-sidebar-menu a i {
        font-size: 18px;
    }
}

/* Small Mobile Screens */
@media (max-width: 576px) {
    .ultra-sidebar-menu a {
        padding: 6px;
        min-width: 65px;
        font-size: 12px;
    }

    .ultra-sidebar-menu a i {
        font-size: 16px;
    }
}




.main-container {
  padding: 2rem 0;
  max-width:90vw;
}

.hero-banner {
  background-color: #e9f2ff;
  padding: 1.5rem 0;
  margin-bottom: 2rem;
}

.breadcrumb-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 15px;
}

.breadcrumb {
  padding: 0;
  background-color: transparent;
  font-size: 0.9rem;
}

.breadcrumb-item a {
  
  color: #4a6baf;
  text-decoration: none;
  transition: color 0.3s;
}

.breadcrumb-item a:hover {
  color: #2c4b8b;
}

.breadcrumb-item.active {
  color: #6c757d;
}



/* Main Content Styles */
.content-card {
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  padding: 2rem;
  margin-bottom: 1.5rem;
}

.section-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: #2c3e50;
  margin-bottom: 1.5rem;
  padding-bottom: 0.75rem;
  border-bottom: 1px solid #eee;
}

.section-subtitle {
  font-size: 1.25rem;
  font-weight: 600;
  color: #2c3e50;
  margin: 1.5rem 0 1rem;
}
      
      /* Wishlist Items */
      .wishlist-item {
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 15px rgba(0,0,0,0.05);
        padding: 20px;
        margin-bottom: 20px;
        transition: all 0.3s ease;
      }
      
      .wishlist-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      }
      
      .wishlist-item img {
        width: 140px;
        height: 140px;
        object-fit: contain;
        border-radius: 8px;
        background: #f9f9f9;
        padding: 10px;
      }
      
      .product-details {
        flex: 1;
        padding: 0 20px;
      }
      
      .product-name {
        font-size: 1.2rem;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 8px;
      }
      
      .product-description {
        font-size: 0.9rem;
        color: #7f8c8d;
        margin-bottom: 10px;
      }
      
      .product-price {
        font-size: 1.3rem;
        font-weight: 700;
        color: #e74c3c;
      }
      
      /* Action Buttons */
      .action-btns {
        min-width: 20vw;
      }
      
      .remove-btn, .add-to-cart-btn {
        padding: 10px 20px;
        border-radius: 6px;
        font-size: 0.95rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
      }
      
      .remove-btn {
        background-color: #fef0f0;
        color: #f56c6c;
      }
      
      .remove-btn:hover {
        background-color: #f56c6c;
        color: white;
      }
      
      .add-to-cart-btn {
        background-color: #f0f7ff;
        color: #1976d2;
      }
      
      .add-to-cart-btn:hover {
        background-color: #1976d2;
        color: white;
      }
      
      /* Empty State */
      .empty-wishlist {
        text-align: center;
        padding: 60px 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 15px rgba(0,0,0,0.05);
      }
      
      .empty-wishlist i {
        font-size: 4rem;
        color: #ddd;
        margin-bottom: 20px;
      }
      
      .empty-wishlist h4 {
        font-size: 1.5rem;
        color: #2c3e50;
        margin-bottom: 10px;
      }
      
      .empty-wishlist p {
        color: #95a5a6;
        margin-bottom: 25px;
      }
      
      /* Responsive Adjustments */
      @media (max-width: 991px) {
        .sidebar {
          margin-bottom: 30px;
        }
        
        .wishlist-item {
          flex-direction: column;
          text-align: center;
        }
        
        .wishlist-item img {
          width: 100%;
          max-width: 200px;
          height: auto;
          margin: 0 auto 20px;
        }
        
        .product-details {
          padding: 0;
          margin-bottom: 15px;
        }
        
        .action-btns {
          width: 100%;
          flex-direction: row;
          justify-content: center;
          gap: 15px;
        }
        
        .remove-btn, .add-to-cart-btn {
          flex: 1;
          max-width: 200px;
          padding: 10px;
        }
      }
      
      @media (min-width: 992px) {
        .wishlist-item {
          display: flex;
          align-items: center;
        }
        
        .action-btns {
          display: flex;
          flex-direction: column;
          gap: 12px;
        }
      }
     
  /* ... (keep all your existing styles) ... */

  /* Responsive Adjustments */
  @media (max-width: 767px) {
    .sidebar {
      margin-bottom: 30px;
    }
    
    .wishlist-item {
      flex-direction: column;
      text-align: center;
      padding: 15px;
    }
    
    .wishlist-item img {
      width: 100%;
      max-width: 180px;
      height: auto;
      margin: 0 auto 15px;
    }
    
    .product-details {
      padding: 0;
      margin-bottom: 15px;
      text-align: center;
    }
    
    .action-btns {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center; /* Center buttons horizontally */
      gap: 10px;
      margin-top: 15px;
    }
    
    .remove-btn, .add-to-cart-btn {
      width: 100%;
      max-width: 200px;
      padding: 10px;
      margin: 0 auto; /* Center individual buttons */
    }
  }

  @media (min-width: 768px) and (max-width: 991px) {
    .action-btns {
      flex-direction: row;
      justify-content: center; /* Center buttons in tablet view */
    }
  }
  .main-container {
  padding: 2rem 0;
  max-width:90vw;
}

.hero-banner {
  background-color: #e9f2ff;
  padding: 1.5rem 0;
  margin-bottom: 2rem;
}

.breadcrumb-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 15px;
}

.breadcrumb {
  padding: 0;
  background-color: transparent;
  font-size: 0.9rem;
}

.breadcrumb-item a {
  
  color: #4a6baf;
  text-decoration: none;
  transition: color 0.3s;
}

.breadcrumb-item a:hover {
  color: #2c4b8b;
}

.breadcrumb-item.active {
  color: #6c757d;
}
  /* ... (rest of your existing styles) ... */
</style>
  </head>

  <body>
  
<body><main class="hero-banner">
  <div class="breadcrumb-container">
      <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="/">Home</a></li>
              <li class="breadcrumb-item active" aria-current="page">Wishlist</li>
          </ol>
      </nav>
  </div>  
</main>

  <div class="container mt-4 mt-md-5">
    
      <div class="row">
          <!-- Sidebar -->
                                 
<div class="col-lg-3 col-md-4 ultra-sidebar-container">
  <div class="ultra-sidebar-header">
      <h2><i class="fas fa-user-circle me-2"></i>My Account</h2>
  </div>
  <div class="ultra-sidebar-menu">
      <a href="/Profile">
          <i class="fas fa-user"></i>Account Details
      </a>
      <a href="/address" >
          <i class="fas fa-map-marker-alt"></i>Address
      </a>
      <a href="/orders">
          <i class="fas fa-box-open"></i>Orders
      </a>
      <a href="/wishlist" class="ultra-active">
          <i class="fas fa-heart"></i>Wishlist
      </a>
      <a href="/cart">
          <i class="fas fa-shopping-cart"></i>Cart
      </a>
      <a href="/wallet">
          <i class="fas fa-wallet"></i>Wallet
      </a>
      <a href="/mycoupons">
          <i class="fas fa-tag"></i>My Coupons
      </a>
      <a href="#" onclick="confirmLogout(event)" class="ultra-logout-btn">
          <i class="fas fa-sign-out-alt me-2"></i>Logout
      </a>
  </div>
</div>

     
        
        <!-- Main Content -->
        <div class="col-lg-9 col-md-8 col-12 main-content">
          <% if (wishlist && wishlist.products.length > 0) { %>
            <% wishlist.products.forEach(item => { %>
              <% if (item.productId) { %>
                <div class="wishlist-item">
                  <div class="row align-items-center">
                    <div class="col-md-2 col-12 text-center">
                      <img src="<%= item.productId.productImage[0] %>" alt="Product Image">
                    </div>
                    <div class="col-md-6 col-12">
                      <div class="product-details">
                        <h3 class="product-name"><%= item.productId.productName %></h3>
                        <p class="product-description"><%= item.productId.description %></p>
                        <p class="product-price">â‚¹<%= Math.floor(item.productId.salePrice) %></p>
                      </div>
                    </div>
                    <div class="col-md-4 col-12">
                      <div class="action-btns">
                        <a href="/removeFromWishlist?id=<%= item.productId._id %>" class="remove-btn">
                          <i class="fas fa-trash-alt me-1"></i> Remove
                        </a>
                        <button onclick="addToCart('<%= item.productId._id %>')" class="add-to-cart-btn">
                          Add to Cart
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              <% } %>
            <% }) %>
          <% } else { %>
            <div class="empty-wishlist">
              <i class="far fa-heart"></i>
              <h4>Your Wishlist is empty</h4>
              <p>Add items you like to your wishlist</p>
              <a href="/shop" class="btn btn-primary">Continue Shopping</a>
            </div>
          <% } %>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
      async function addToCart(productId) {
        try {
          const response = await fetch(`/addToCartt?id=${productId}`, {
            method: 'GET',
          });

          const data = await response.json();

          if (response.ok && data.success) {
            Swal.fire({
              icon: 'success',
              title: 'Added to Cart',
              text: data.message,
              timer: 1500,
              showConfirmButton: false
            });
            window.location.reload()
          } else {
            Swal.fire({
              icon: 'error',
              title: 'Oops...',
              text: data.message || 'Something went wrong!',
            });
          }
        } catch (error) {
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Something went wrong!',
          });
          console.error("Error adding to cart:", error);
        }
      }

      function confirmLogout(event) {
        event.preventDefault();
        Swal.fire({
          title: 'Logout?',
          text: 'Are you sure you want to logout?',
          icon: 'question',
          showCancelButton: true,
          confirmButtonColor: '#d33',
          cancelButtonColor: '#3085d6',
          confirmButtonText: 'Yes, logout'
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = '/logout';
          }
        });
      }
    </script>
  </body>
</html>